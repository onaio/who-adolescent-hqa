{% extends "base.jinja2" %}
{% block title %}{{ gettext("States") }}{% endblock %}
{% block page_title %} {{ self.title() }} {% endblock %}
{% block breadcrumbs %}
{% endblock %}
{% block sub_menu_item %}
  <li class="selected">
  <input type="checkbox" name ="group-1" id="group-1" checked>
    <a href="{{request.route_url('states', traverse=())}}">
        {{ gettext('States') }}
    </a>
  {%if request.can_list_state %}
  <ul class="sub-location" id="states-list" style="list-style: none;">
    {% for state in locations %}
    <li style="margin: 0 auto;
    padding: 5px;
    margin-top: 1px !important;">
      <a href="{{state.get_url(request, period)}}" style="color: #def1fd;
    margin: 0px 30px 0px 35px; font-weight: 300;
    font-size: 14px; display: block;">
          {{ state.name|format_location_name }}
          {{ gettext(state.location_type|capitalize) }}
      </a>
      </li>
    {% endfor %}
    </ul>
  {% endif %}
  </li>
{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-md-12">
      {% block location_table %}
        <form method="post" action="">
            <div class="location_table">
              {% include '_summary_scores_table.jinja2' %}
            </div>
        </form>
      {% endblock %}
    </div>
  </div>
{% endblock content %}
{% block page_scripts%}
<script type="text/javascript">
  jQuery(document).ready(function(){
  var accordionsMenu = $('.sub-menu');

  if( accordionsMenu.length > 0 ) {
    
    accordionsMenu.each(function(){
      var accordion = $(this);
      //detect change in the input[type="checkbox"] value
      accordion.on('change', 'input[type="checkbox"]', function(){
        var checkbox = $(this);
        console.log(checkbox.prop('checked'));
        ( checkbox.prop('checked') ) ? checkbox.siblings('ul').attr('style', 'display:none;').slideDown(300) : checkbox.siblings('ul').attr('style', 'display:block;').slideUp(300);
      });
    });
  }
});
</script>
{% endblock %}
